"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/elasticsearch";
exports.ids = ["pages/api/elasticsearch"];
exports.modules = {

/***/ "handlebars":
/*!*****************************!*\
  !*** external "handlebars" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("handlebars");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@elastic/elasticsearch":
/*!*****************************************!*\
  !*** external "@elastic/elasticsearch" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = import("@elastic/elasticsearch");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Felasticsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Felasticsearch.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Felasticsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Felasticsearch.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/elasticsearch.js */ \"(api)/./pages/api/elasticsearch.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/elasticsearch\",\n        pathname: \"/api/elasticsearch\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_elasticsearch_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmVsYXN0aWNzZWFyY2gmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmVsYXN0aWNzZWFyY2guanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbGFzdGljc2VhcmNoLXZpZXdlci0yLz85MTdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZWxhc3RpY3NlYXJjaC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2VsYXN0aWNzZWFyY2hcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9lbGFzdGljc2VhcmNoXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Felasticsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Felasticsearch.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/elasticsearch.js":
/*!************************************!*\
  !*** ./pages/api/elasticsearch.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @elastic/elasticsearch */ \"@elastic/elasticsearch\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var handlebars__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! handlebars */ \"handlebars\");\n/* harmony import */ var handlebars__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(handlebars__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__]);\n_elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const { url, username, password, index, query, searchTerm } = req.body;\n        if (!query) {\n            return res.status(400).json({\n                error: \"Query object is required in the request body.\"\n            });\n        }\n        // URL'den index pattern'i çıkar\n        const baseUrl = url.split(\"/\").slice(0, -1).join(\"/\");\n        const urlIndexPattern = url.split(\"/\").pop();\n        const client = new _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__.Client({\n            node: baseUrl,\n            auth: {\n                username: username,\n                password: password\n            },\n            maxRetries: 10,\n            requestTimeout: 10000,\n            sniffOnStart: true,\n            ssl: {\n                rejectUnauthorized: false\n            },\n            tls: {\n                rejectUnauthorized: false\n            }\n        });\n        // Extract size and from from the query body if they exist, otherwise use defaults\n        const size = query.size || 10;\n        const from = query.from || 0;\n        // Remove size and from from the query body before sending to client.search\n        const searchBody = {\n            ...query\n        };\n        delete searchBody.size;\n        delete searchBody.from;\n        // Perform the search using the index pattern from URL if available\n        console.log(\"=== İLK SORGU BAŞLIYOR ===\");\n        console.log(\"Sorgu:\", JSON.stringify(searchBody, null, 2));\n        let response;\n        try {\n            response = await client.search({\n                index: urlIndexPattern || index,\n                body: searchBody,\n                size: size,\n                from: from\n            });\n            console.log(\"İlk sorgu sonucu:\", response.body.hits.total.value, \"sonu\\xe7\");\n        } catch (error) {\n            console.error(\"İlk sorgu hatası:\", error);\n            throw error;\n        }\n        // Eğer sonuç bulunamazsa ve searchTerm varsa, basit bir match sorgusu dene\n        if (response.body.hits.total.value === 0 && searchTerm) {\n            console.log(\"\\n=== FALLBACK SORGUSU BAŞLIYOR ===\");\n            console.log(\"SearchTerm:\", searchTerm);\n            try {\n                // Fallback query template'ini oku ve derle\n                const fallbackTemplate = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"new_query_fallback.txt\"), \"utf8\");\n                console.log(\"Fallback template dosyası okundu\");\n                const compiledFallbackQuery = handlebars__WEBPACK_IMPORTED_MODULE_3___default().compile(fallbackTemplate);\n                // Fallback query'yi hazırla\n                const fallbackQuery = JSON.parse(compiledFallbackQuery({\n                    term: searchTerm,\n                    size: size,\n                    from: from,\n                    term_words: searchTerm.split(/\\s+/)\n                }));\n                console.log(\"Fallback sorgu:\", JSON.stringify(fallbackQuery, null, 2));\n                // Yeni bir client oluştur\n                const fallbackClient = new _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__.Client({\n                    node: baseUrl,\n                    auth: {\n                        username: username,\n                        password: password\n                    },\n                    maxRetries: 10,\n                    requestTimeout: 10000,\n                    sniffOnStart: true,\n                    ssl: {\n                        rejectUnauthorized: false\n                    },\n                    tls: {\n                        rejectUnauthorized: false\n                    }\n                });\n                const fallbackResponse = await fallbackClient.search({\n                    index: urlIndexPattern || index,\n                    body: fallbackQuery,\n                    size: size,\n                    from: from\n                });\n                console.log(\"Fallback sorgu sonucu:\", fallbackResponse.body.hits.total.value, \"sonu\\xe7\");\n                if (fallbackResponse.body.hits.total.value > 0) {\n                    console.log(\"Fallback sorgu başarılı, sonu\\xe7lar d\\xf6n\\xfcyor\");\n                    return res.status(200).json({\n                        ...fallbackResponse,\n                        isFallback: true\n                    });\n                } else {\n                    console.log(\"Fallback sorgu da sonu\\xe7 bulamadı\");\n                }\n            } catch (fallbackError) {\n                console.error(\"Fallback sorgu hatası:\", fallbackError);\n                console.error(\"Hata detayı:\", fallbackError.message);\n                throw fallbackError;\n            }\n        }\n        // Send successful response\n        console.log(\"\\n=== SONU\\xc7 ===\");\n        console.log(\"İlk sorgu sonu\\xe7ları d\\xf6n\\xfcyor\");\n        res.status(200).json(response);\n    } catch (error) {\n        console.error(\"Elasticsearch hatası:\", error);\n        res.status(500).json({\n            error: \"Elasticsearch sorgusu \\xe7alıştırılırken hata oluştu\",\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO1FBQ2RtQixRQUFRbkIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkNaLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJTLE9BQU87WUFDUDBDLFNBQVMxQyxNQUFNUixPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2VsYXN0aWNzZWFyY2gtdmlld2VyLTIvLi9wYWdlcy9hcGkvZWxhc3RpY3NlYXJjaC5qcz9iMzQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gJ0BlbGFzdGljL2VsYXN0aWNzZWFyY2gnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IEhhbmRsZWJhcnMgZnJvbSAnaGFuZGxlYmFycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVybCwgdXNlcm5hbWUsIHBhc3N3b3JkLCBpbmRleCwgcXVlcnksIHNlYXJjaFRlcm0gfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFxdWVyeSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdRdWVyeSBvYmplY3QgaXMgcmVxdWlyZWQgaW4gdGhlIHJlcXVlc3QgYm9keS4nIH0pO1xuICAgIH1cblxuICAgIC8vIFVSTCdkZW4gaW5kZXggcGF0dGVybidpIMOnxLFrYXJcbiAgICBjb25zdCBiYXNlVXJsID0gdXJsLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKTtcbiAgICBjb25zdCB1cmxJbmRleFBhdHRlcm4gPSB1cmwuc3BsaXQoJy8nKS5wb3AoKTtcblxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoe1xuICAgICAgbm9kZTogYmFzZVVybCxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICB9LFxuICAgICAgbWF4UmV0cmllczogMTAsXG4gICAgICByZXF1ZXN0VGltZW91dDogMTAwMDAsIC8vIDEwIHNhbml5ZSB0aW1lb3V0XG4gICAgICBzbmlmZk9uU3RhcnQ6IHRydWUsXG4gICAgICBzc2w6IHtcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHRsczoge1xuICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBFeHRyYWN0IHNpemUgYW5kIGZyb20gZnJvbSB0aGUgcXVlcnkgYm9keSBpZiB0aGV5IGV4aXN0LCBvdGhlcndpc2UgdXNlIGRlZmF1bHRzXG4gICAgY29uc3Qgc2l6ZSA9IHF1ZXJ5LnNpemUgfHwgMTA7XG4gICAgY29uc3QgZnJvbSA9IHF1ZXJ5LmZyb20gfHwgMDtcblxuICAgIC8vIFJlbW92ZSBzaXplIGFuZCBmcm9tIGZyb20gdGhlIHF1ZXJ5IGJvZHkgYmVmb3JlIHNlbmRpbmcgdG8gY2xpZW50LnNlYXJjaFxuICAgIGNvbnN0IHNlYXJjaEJvZHkgPSB7IC4uLnF1ZXJ5IH07XG4gICAgZGVsZXRlIHNlYXJjaEJvZHkuc2l6ZTtcbiAgICBkZWxldGUgc2VhcmNoQm9keS5mcm9tO1xuICAgIFxuICAgIC8vIFBlcmZvcm0gdGhlIHNlYXJjaCB1c2luZyB0aGUgaW5kZXggcGF0dGVybiBmcm9tIFVSTCBpZiBhdmFpbGFibGVcbiAgICBjb25zb2xlLmxvZygnPT09IMSwTEsgU09SR1UgQkHFnkxJWU9SID09PScpO1xuICAgIGNvbnNvbGUubG9nKCdTb3JndTonLCBKU09OLnN0cmluZ2lmeShzZWFyY2hCb2R5LCBudWxsLCAyKSk7XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zZWFyY2goe1xuICAgICAgICBpbmRleDogdXJsSW5kZXhQYXR0ZXJuIHx8IGluZGV4LFxuICAgICAgICBib2R5OiBzZWFyY2hCb2R5LFxuICAgICAgICBzaXplOiBzaXplLCBcbiAgICAgICAgZnJvbTogZnJvbSBcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ8SwbGsgc29yZ3Ugc29udWN1OicsIHJlc3BvbnNlLmJvZHkuaGl0cy50b3RhbC52YWx1ZSwgJ3NvbnXDpycpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfEsGxrIHNvcmd1IGhhdGFzxLE6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgLy8gRcSfZXIgc29udcOnIGJ1bHVuYW1henNhIHZlIHNlYXJjaFRlcm0gdmFyc2EsIGJhc2l0IGJpciBtYXRjaCBzb3JndXN1IGRlbmVcbiAgICBpZiAocmVzcG9uc2UuYm9keS5oaXRzLnRvdGFsLnZhbHVlID09PSAwICYmIHNlYXJjaFRlcm0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdcXG49PT0gRkFMTEJBQ0sgU09SR1VTVSBCQcWeTElZT1IgPT09Jyk7XG4gICAgICBjb25zb2xlLmxvZygnU2VhcmNoVGVybTonLCBzZWFyY2hUZXJtKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmFsbGJhY2sgcXVlcnkgdGVtcGxhdGUnaW5pIG9rdSB2ZSBkZXJsZVxuICAgICAgICBjb25zdCBmYWxsYmFja1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnbmV3X3F1ZXJ5X2ZhbGxiYWNrLnR4dCcpLCAndXRmOCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnRmFsbGJhY2sgdGVtcGxhdGUgZG9zeWFzxLEgb2t1bmR1Jyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb21waWxlZEZhbGxiYWNrUXVlcnkgPSBIYW5kbGViYXJzLmNvbXBpbGUoZmFsbGJhY2tUZW1wbGF0ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGYWxsYmFjayBxdWVyeSd5aSBoYXrEsXJsYVxuICAgICAgICBjb25zdCBmYWxsYmFja1F1ZXJ5ID0gSlNPTi5wYXJzZShjb21waWxlZEZhbGxiYWNrUXVlcnkoe1xuICAgICAgICAgIHRlcm06IHNlYXJjaFRlcm0sXG4gICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICBmcm9tOiBmcm9tLFxuICAgICAgICAgIHRlcm1fd29yZHM6IHNlYXJjaFRlcm0uc3BsaXQoL1xccysvKVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0ZhbGxiYWNrIHNvcmd1OicsIEpTT04uc3RyaW5naWZ5KGZhbGxiYWNrUXVlcnksIG51bGwsIDIpKTtcblxuICAgICAgICAvLyBZZW5pIGJpciBjbGllbnQgb2x1xZ90dXJcbiAgICAgICAgY29uc3QgZmFsbGJhY2tDbGllbnQgPSBuZXcgQ2xpZW50KHtcbiAgICAgICAgICBub2RlOiBiYXNlVXJsLFxuICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1heFJldHJpZXM6IDEwLFxuICAgICAgICAgIHJlcXVlc3RUaW1lb3V0OiAxMDAwMCxcbiAgICAgICAgICBzbmlmZk9uU3RhcnQ6IHRydWUsXG4gICAgICAgICAgc3NsOiB7XG4gICAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0bHM6IHtcbiAgICAgICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBhd2FpdCBmYWxsYmFja0NsaWVudC5zZWFyY2goe1xuICAgICAgICAgIGluZGV4OiB1cmxJbmRleFBhdHRlcm4gfHwgaW5kZXgsXG4gICAgICAgICAgYm9keTogZmFsbGJhY2tRdWVyeSxcbiAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgIGZyb206IGZyb21cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0ZhbGxiYWNrIHNvcmd1IHNvbnVjdTonLCBmYWxsYmFja1Jlc3BvbnNlLmJvZHkuaGl0cy50b3RhbC52YWx1ZSwgJ3NvbnXDpycpO1xuXG4gICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlLmJvZHkuaGl0cy50b3RhbC52YWx1ZSA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFsbGJhY2sgc29yZ3UgYmHFn2FyxLFsxLEsIHNvbnXDp2xhciBkw7Zuw7x5b3InKTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgLi4uZmFsbGJhY2tSZXNwb25zZSxcbiAgICAgICAgICAgIGlzRmFsbGJhY2s6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFsbGJhY2sgc29yZ3UgZGEgc29udcOnIGJ1bGFtYWTEsScpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhbGxiYWNrIHNvcmd1IGhhdGFzxLE6JywgZmFsbGJhY2tFcnJvcik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0hhdGEgZGV0YXnEsTonLCBmYWxsYmFja0Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aHJvdyBmYWxsYmFja0Vycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTZW5kIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICBjb25zb2xlLmxvZygnXFxuPT09IFNPTlXDhyA9PT0nKTtcbiAgICBjb25zb2xlLmxvZygnxLBsayBzb3JndSBzb251w6dsYXLEsSBkw7Zuw7x5b3InKTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRWxhc3RpY3NlYXJjaCBoYXRhc8SxOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgZXJyb3I6ICdFbGFzdGljc2VhcmNoIHNvcmd1c3Ugw6dhbMSxxZ90xLFyxLFsxLFya2VuIGhhdGEgb2x1xZ90dScsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgIH0pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJDbGllbnQiLCJmcyIsInBhdGgiLCJIYW5kbGViYXJzIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXJsIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImluZGV4IiwicXVlcnkiLCJzZWFyY2hUZXJtIiwiYm9keSIsImVycm9yIiwiYmFzZVVybCIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwidXJsSW5kZXhQYXR0ZXJuIiwicG9wIiwiY2xpZW50Iiwibm9kZSIsImF1dGgiLCJtYXhSZXRyaWVzIiwicmVxdWVzdFRpbWVvdXQiLCJzbmlmZk9uU3RhcnQiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJ0bHMiLCJzaXplIiwiZnJvbSIsInNlYXJjaEJvZHkiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwic2VhcmNoIiwiaGl0cyIsInRvdGFsIiwidmFsdWUiLCJmYWxsYmFja1RlbXBsYXRlIiwicmVhZEZpbGVTeW5jIiwicHJvY2VzcyIsImN3ZCIsImNvbXBpbGVkRmFsbGJhY2tRdWVyeSIsImNvbXBpbGUiLCJmYWxsYmFja1F1ZXJ5IiwicGFyc2UiLCJ0ZXJtIiwidGVybV93b3JkcyIsImZhbGxiYWNrQ2xpZW50IiwiZmFsbGJhY2tSZXNwb25zZSIsImlzRmFsbGJhY2siLCJmYWxsYmFja0Vycm9yIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/elasticsearch.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Felasticsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Felasticsearch.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();